{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/BAZRA/Desktop/Bazra project/project react js/Admin/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/BAZRA/Desktop/Bazra project/project react js/Admin/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/BAZRA/Desktop/Bazra project/project react js/Admin/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/BAZRA/Desktop/Bazra project/project react js/Admin/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState,useEffect}from\"react\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{useHistory}from\"react-router-dom\";import\"../components/FontawsomeIcons\";import scrollreveal from\"scrollreveal\";import{Form,Button}from'semantic-ui-react';import'./Form.css';import swal from'sweetalert';import{useForm}from\"react-hook-form\";import{faEye}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var eye=/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEye});var LoginMA=function LoginMA(){var togglePasswordVisiblity=function togglePasswordVisiblity(){setPasswordShown(passwordShown?false:true);};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),passwordShown=_useState2[0],setPasswordShown=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var onSubmit=function onSubmit(data){console.log(data);login();};useEffect(function(){var sr=scrollreveal({origin:\"bottom\",distance:\"80px\",duration:2000,reset:false});sr.reveal(\"\\n      .form-container \\n    \",{opacity:0,interval:100});},[]);var history=useHistory();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];useEffect(function(){if(localStorage.getItem(\"user-info\")){}},[]);function login(){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var users,item,options,url,response,result,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:users={username:username,password:password};item={username:username,password:password};options={method:'POST',headers:{'Content-Type':'application/json',\"Accept\":\"application/json\",\"Authorization\":\"Bearer\"},body:JSON.stringify(item)};url=\"http://192.168.1.27:8080/api/signin/user\";_context.prev=4;_context.next=7;return fetch(url,options);case 7:response=_context.sent;_context.next=10;return response.json();case 10:result=_context.sent;localStorage.setItem('user',JSON.stringify(result['user']));user=localStorage.getItem('user');console.log(user);localStorage.setItem('user',JSON.stringify(users));if(response.ok){console.log(\"Login successful\");swal(\"Successful\",\"Welcom\",\"success\",{buttons:false,timer:2000}).then(function(value){localStorage.setItem('user',JSON.stringify(result['user']));localStorage.getItem('user');localStorage.setItem(\"jwt\",JSON.stringify(result['jwt']));localStorage.getItem('jwt');window.location.href=\"/admin\";});}else{console.log(\"failed\");swal(\"Failed\",\"Wrong Password or Email Address\",\"error\");}_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](4);console.error(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[4,18]]);}));return _login.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'90vh'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-btn\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-content-left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Login\"}),/*#__PURE__*/_jsx(Form.Field,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputsx\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"user\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"form-input\",type:\"username\",name:\"username\",placeholder:\"Enter Your Phone Number\"},register(\"user\",{required:true,maxLength:30})),{},{onChange:function onChange(e){return setUsername(e.target.value);}})),errors.user&&/*#__PURE__*/_jsx(\"p\",{className:\"text-error\",children:\"UserName Required\"})]})}),/*#__PURE__*/_jsx(Form.Field,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputsx\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"lock\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"form-input\",type:passwordShown?\"text\":\"password\",name:\"password\",placeholder:\"Enter your password\"},register(\"pass\",{required:true,maxLength:30})),{},{onChange:function onChange(e){return setPassword(e.target.value);}})),\"  \",/*#__PURE__*/_jsx(\"i\",{onClick:togglePasswordVisiblity,children:eye}),/*#__PURE__*/_jsx(\"span\",{className:\"form-input-login1\"}),errors.pass&&/*#__PURE__*/_jsx(\"p\",{className:\"text-error\",children:\"Password Required\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-inputs\"}),/*#__PURE__*/_jsx(\"button\",{className:\"form-input-btnx\",type:\"sumbit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form-input-login\"})]})})]})});};export default LoginMA;","map":{"version":3,"sources":["C:/Users/BAZRA/Desktop/Bazra project/project react js/Admin/admin/src/components/LoginMA.js"],"names":["React","useState","useEffect","FontAwesomeIcon","useHistory","scrollreveal","Form","Button","swal","useForm","faEye","eye","LoginMA","togglePasswordVisiblity","setPasswordShown","passwordShown","register","handleSubmit","errors","formState","onSubmit","data","console","log","login","sr","origin","distance","duration","reset","reveal","opacity","interval","history","username","setUsername","password","setPassword","localStorage","getItem","users","item","options","method","headers","body","JSON","stringify","url","fetch","response","json","result","setItem","user","ok","buttons","timer","then","value","window","location","href","error","display","justifyContent","alignItems","height","required","maxLength","e","target","pass"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState,useEffect } from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../components/FontawsomeIcons\"\r\nimport scrollreveal from \"scrollreveal\";\r\nimport { Form, Button } from 'semantic-ui-react';\r\nimport './Form.css';\r\nimport swal from 'sweetalert';\r\n\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport { faEye } from \"@fortawesome/free-solid-svg-icons\";\r\nconst eye = <FontAwesomeIcon icon={faEye} />;\r\nconst LoginMA = () => {\r\n  const togglePasswordVisiblity = () => {\r\n    setPasswordShown(passwordShown ? false : true);\r\n  };\r\n  const [passwordShown, setPasswordShown] = useState(false);\r\n  const { register, handleSubmit, formState: { errors } } = useForm();\r\n    const onSubmit = (data) => {\r\n        console.log(data);\r\n     login();\r\n    \r\n    }\r\n  useEffect(() => {\r\n    const sr = scrollreveal({\r\n      origin: \"bottom\",\r\n      distance: \"80px\",\r\n      duration: 2000,\r\n      reset: false,\r\n    });\r\n    sr.reveal(\r\n      `\r\n      .form-container \r\n    `,\r\n      {\r\n        opacity: 0,\r\n        interval: 100,\r\n      }\r\n    );\r\n  }, []);\r\n  \r\n\r\n  const history=useHistory();\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    useEffect(()=>\r\n{\r\n  if(localStorage.getItem(\"user-info\")){\r\n     \r\n  }\r\n},[])\r\nasync function login(){\r\n \r\n\r\n  const users={username,password}\r\n \r\n  let item={username,password};\r\n const options={\r\n      method:'POST',\r\n      headers:{\r\n\r\n          'Content-Type':'application/json',\r\n          \"Accept\":\"application/json\",\r\n          \"Authorization\":`Bearer`\r\n         \r\n      },\r\n      body:JSON.stringify(item)\r\n      \r\n  }\r\n  const url =\"http://192.168.1.27:8080/api/signin/user\"\r\n  try{\r\n   const response= await fetch(url,options);\r\n    const result =await response.json();\r\n   \r\n    localStorage.setItem('user', JSON.stringify(result['user']));\r\n\r\n \r\n const user= localStorage.getItem('user')\r\n console.log(user);\r\n  \r\n   localStorage.setItem('user', JSON.stringify(users))\r\n \r\nif(response.ok){\r\n  console.log(\"Login successful\")\r\n  swal(\"Successful\", \"Welcom\", \"success\", {\r\n    buttons: false,\r\n    timer: 2000,\r\n  }).then((value) => {\r\n    \r\n    localStorage.setItem('user', JSON.stringify(result['user']));\r\n    localStorage.getItem('user')\r\n    localStorage.setItem(\"jwt\", JSON.stringify(result['jwt']));\r\n    localStorage.getItem('jwt')\r\n    window.location.href = \"/admin\";\r\n \r\n  \r\n  });\r\n  \r\n}else{\r\n  console.log(\"failed\")\r\nswal(\"Failed\", \"Wrong Password or Email Address\", \"error\")\r\n}\r\n}catch(error) {\r\n  console.error(error);\r\n}\r\n\r\n \r\n}\r\n\r\n  return (\r\n    \r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '90vh'\r\n      }}\r\n    >\r\n      \r\n        <div className='form-container'>\r\n        <span className='close-btn'>Ã—</span>\r\n        <div className='form-content-left'>\r\n         \r\n        </div>\r\n    <div className=\"form\" >\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n        <h2>Admin Login</h2>\r\n\r\n        <Form.Field>\r\n        <div className=\"form-inputsx\">\r\n         <FontAwesomeIcon icon=\"user\"/> \r\n          <label className=\"form-label\">Phone Number</label>\r\n          <input\r\n            className=\"form-input\"\r\n            type=\"username\"\r\n            name=\"username\"\r\n            placeholder=\"Enter Your Phone Number\"\r\n            {...register(\"user\", { required: true, maxLength: 30 })}\r\n            onChange={(e) => setUsername(e.target.value)} \r\n          />\r\n{errors.user && <p className=\"text-error\">UserName Required</p>}\r\n          \r\n        </div>\r\n        </Form.Field>\r\n    \r\n        <Form.Field>\r\n        <div className=\"form-inputsx\">\r\n        <FontAwesomeIcon icon=\"lock\"/> \r\n          <label className=\"form-label\">Password</label>\r\n          <input\r\n            className=\"form-input\"\r\n            type={passwordShown ? \"text\" : \"password\"}\r\n            name=\"password\"\r\n            placeholder=\"Enter your password\"\r\n            {...register(\"pass\", { required: true, maxLength: 30 })}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />  <i onClick={togglePasswordVisiblity}>{eye}</i>\r\n          <span className=\"form-input-login1\">\r\n         \r\n          </span>\r\n     \r\n          {errors.pass && <p className=\"text-error\">Password Required</p>}\r\n        </div>\r\n        </Form.Field>\r\n\r\n        <div className=\"form-inputs\"></div>\r\n        <button className=\"form-input-btnx\" type='sumbit' >\r\n          Login\r\n        </button>\r\n        <span className=\"form-input-login\">\r\n         \r\n        </span>\r\n        </form>\r\n       \r\n      </div>\r\n      \r\n     \r\n    </div>\r\n    \r\n    </div>\r\n    \r\n  );\r\n};\r\n\r\nexport default LoginMA;\r\n"]},"metadata":{},"sourceType":"module"}